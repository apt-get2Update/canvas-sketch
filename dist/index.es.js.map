{"version":3,"file":"index.es.js","sources":["../src/component/constants.js","../src/component/Sketch.js"],"sourcesContent":["export const TOOL = {\n  PENCIL: \"pencil\",\n  ERASE: \"erase\",\n  TEXT: \"text\"\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TOOL } from \"./constants\";\n\nexport default class Sketch extends React.Component {\n  constructor(props) {\n    super(props);\n    this.down = { x: \"\", y: \"\" };\n    this.pencil = {};\n    this.ctx = {};\n    this.canvas = {};\n    this.toolEnable = false;\n    this.tempInput = [];\n  }\n\n  static defaultProps = {\n    width: window.innerWidth * 0.9,\n    height: window.innerHeight,\n    updateToolInfo: () => {}\n  };\n\n  static propTypes = {\n    drawInput: PropTypes.array,\n    updateToolInfo: PropTypes.func,\n    color: PropTypes.string,\n    tool: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number\n  };\n\n  //initial rendering in the lines in UI\n  componentDidMount() {\n    this.canvas = document.getElementById(\"canvas\");\n    this.ctx = this.canvas.getContext(\"2d\");\n    const { drawInput } = this.props;\n    const pencilTools = drawInput.filter(tool => tool.toolType === TOOL.PENCIL);\n\n    pencilTools.forEach(tool => {\n      for (let i = 0; i < tool.x.length - 1; i++) {\n        this.renderLine(\n          tool.x[i],\n          tool.y[i],\n          tool.x[i + 1],\n          tool.y[i + 1],\n          tool.color\n        );\n      }\n    });\n  }\n\n  //clear canvas context\n  componentWillUnmount() {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  //every update of the component will be clear canvas and redraw it\n  componentDidUpdate() {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    const { drawInput } = this.props;\n    const pencilTools = drawInput.filter(tool => tool.toolType === TOOL.PENCIL);\n    pencilTools.forEach(tool => {\n      for (let i = 0; i < tool.x.length - 1; i++) {\n        this.renderLine(\n          tool.x[i],\n          tool.y[i],\n          tool.x[i + 1],\n          tool.y[i + 1],\n          tool.color\n        );\n      }\n    });\n  }\n\n  unDo() {\n    const { drawInput, updateToolInfo } = this.props;\n    if (drawInput.length > 0) {\n      this.tempInput.push(drawInput[drawInput.length - 1]);\n      const data =\n        drawInput.lenght === 1 ? [] : drawInput.slice(0, drawInput.length - 2);\n      updateToolInfo(data);\n    }\n  }\n\n  reDo() {\n    const { drawInput, updateToolInfo } = this.props;\n    if (this.tempInput.length > 0) {\n      const data = this.tempInput.pop();\n      updateToolInfo([...drawInput, data]);\n    }\n  }\n  eraseAll = () => {\n    const { drawInput, updateToolInfo } = this.props;\n    this.tempInput.concat(drawInput);\n    updateToolInfo([]);\n  };\n\n  renderLine(x1, y1, x2, y2, color) {\n    this.ctx.strokeStyle = color;\n    this.ctx.globalCompositeOperation = \"source-over\";\n    this.ctx.beginPath();\n    this.ctx.moveTo(x1, y1);\n    this.ctx.lineTo(x2, y2);\n    this.ctx.lineWidth = 2;\n    this.ctx.lineCap = \"round\";\n    this.ctx.lineJoin = \"round\";\n    this.ctx.stroke();\n  }\n\n  onMouseMove(e) {\n    let canvas = document.getElementById(\"canvas\");\n    if (this.toolEnable) {\n      let context = canvas.getContext(\"2d\");\n      context.globalCompositeOperation = \"source-over\";\n      context.beginPath();\n      context.moveTo(this.down.x, this.down.y);\n      context.lineTo(\n        e.clientX - canvas.getBoundingClientRect().left,\n        e.clientY - canvas.getBoundingClientRect().top\n      );\n      context.strokeStyle = this.props.color;\n      context.lineWidth = 2;\n      context.lineCap = \"round\";\n      context.lineJoin = \"round\";\n      context.stroke();\n      this.down.x = e.clientX - canvas.getBoundingClientRect().left;\n      this.down.y = e.clientY - canvas.getBoundingClientRect().top;\n      this.pencil.x.push(e.clientX - canvas.getBoundingClientRect().left);\n      this.pencil.y.push(e.clientY - canvas.getBoundingClientRect().top);\n    }\n  }\n\n  onMouseDown(e) {\n    const { drawInput, updateToolInfo, color, tool } = this.props;\n    const tempTool = {\n      toolType: \"\",\n      x: [],\n      y: [],\n      textContent: \"\",\n      color: \"\"\n    };\n    this.toolEnable = true;\n    const canvas = document.getElementById(\"canvas\");\n    this.down.x = e.clientX - canvas.getBoundingClientRect().left;\n    this.down.y = e.clientY - canvas.getBoundingClientRect().top;\n\n    if (tool === TOOL.PENCIL) {\n      this.ctx = canvas.getContext(\"2d\");\n      this.ctx.fillStyle = color;\n      tempTool.toolType = tool;\n      tempTool.x.push(this.down.x);\n      tempTool.y.push(this.down.y);\n      tempTool.color = color;\n      this.pencil = tempTool;\n    }\n    updateToolInfo([...drawInput, tempTool]);\n  }\n\n  updateToolInfo(e) {\n    e.preventDefault();\n    const { drawInput, updateToolInfo } = this.props;\n    if (this.toolEnable) {\n      updateToolInfo([...drawInput, this.pencil]);\n    }\n    this.pencil = {};\n    this.toolEnable = false;\n  }\n\n  render() {\n    const { width, height } = this.props;\n    return (\n      <canvas\n        id='canvas'\n        width={width}\n        height={height}\n        ref={el => (this.canvas = el)}\n        onMouseMove={e => this.onMouseMove(e)}\n        onMouseDown={e => this.onMouseDown(e)}\n        onMouseLeave={e => this.updateToolInfo(e)}\n        onMouseUp={e => this.updateToolInfo(e)}\n      >\n        This is not supported\n      </canvas>\n    );\n  }\n}\n"],"names":["TOOL","Sketch","props","eraseAll","drawInput","updateToolInfo","tempInput","concat","down","x","y","pencil","ctx","canvas","toolEnable","document","getElementById","getContext","pencilTools","filter","tool","toolType","PENCIL","forEach","i","length","renderLine","color","clearRect","width","height","push","data","lenght","slice","pop","x1","y1","x2","y2","strokeStyle","globalCompositeOperation","beginPath","moveTo","lineTo","lineWidth","lineCap","lineJoin","stroke","e","context","clientX","getBoundingClientRect","left","clientY","top","tempTool","fillStyle","preventDefault","el","onMouseMove","onMouseDown","React","Component","defaultProps","window","innerWidth","innerHeight","propTypes","PropTypes","array","func","string","number"],"mappings":"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"}